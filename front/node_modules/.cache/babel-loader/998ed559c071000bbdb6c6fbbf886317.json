{"ast":null,"code":"import _toConsumableArray from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/yazid/Pictures/personality-test/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yazid/Pictures/personality-test/front/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error_message: \"\",\n      users: [],\n      user_id: '',\n      user_name: ''\n    };\n    _this.allUsers =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch('//localhost:8080/users');\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n\n            case 6:\n              data = _context.sent;\n\n              _this.setState({\n                users: data\n              });\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    _this.addUser =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(props) {\n        var user_name, response, answer, user_id, user, users;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n\n                if (props) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw new Error(\"you need  a name \");\n\n              case 3:\n                user_name = props.user_name;\n                console.log('adduser', props);\n                _context2.next = 7;\n                return fetch(\"http://localhost:8080/add/user?user_name=\".concat(user_name), {\n                  method: 'POST'\n                });\n\n              case 7:\n                response = _context2.sent;\n                _context2.next = 10;\n                return response.json();\n\n              case 10:\n                answer = _context2.sent;\n\n                if (answer.success) {\n                  // we reproduce the user that was created in the database, locally\n                  user_id = answer.result;\n                  user = {\n                    user_name: user_name,\n                    user_id: user_id\n                  };\n                  users = [].concat(_toConsumableArray(_this.state.users), [user]);\n\n                  _this.setState({\n                    users: users\n                  });\n                } else {\n                  _this.setState({\n                    error_message: answer.message\n                  });\n                }\n\n                _context2.next = 17;\n                break;\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this.setState({\n                  error_message: _context2.t0.message\n                });\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 14]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.onSubmit = function (evt) {\n      evt.preventDefault();\n      var user_name = _this.state.user_name;\n\n      _this.addUser({\n        user_name: user_name\n      });\n\n      _this.state.users.push({\n        user_name: user_name\n      });\n\n      _this.setState({\n        user_name: \"\"\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.allUsers();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() //All users\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.setState.user_name);\n      var users = this.state.users;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, users.map(function (x) {\n        return React.createElement(\"div\", {\n          key: x.user_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"  \", x.user_name));\n      }), React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        placeholder: \"user_name\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            user_name: evt.target.value\n          });\n        },\n        value: this.state.user_name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"ok\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"reset\",\n        value: \"cancel\",\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/yazid/Pictures/personality-test/front/src/App.js"],"names":["React","Component","App","state","error_message","users","user_id","user_name","allUsers","fetch","response","json","data","setState","console","log","addUser","props","Error","method","answer","success","result","user","message","onSubmit","evt","preventDefault","push","map","x","target","value"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;;IAEMC,G;;;;;;;;;;;;;;;;;UACJC,K,GAAM;AACJC,MAAAA,aAAa,EAAE,EADX;AAEJC,MAAAA,KAAK,EAAC,EAFF;AAGJC,MAAAA,OAAO,EAAC,EAHJ;AAIJC,MAAAA,SAAS,EAAC;AAJN,K;UAYHC,Q;;;;6BAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEaC,KAAK,CAAC,wBAAD,CAFlB;;AAAA;AAEJC,cAAAA,QAFI;AAAA;AAAA,qBAGSA,QAAQ,CAACC,IAAT,EAHT;;AAAA;AAGJC,cAAAA,IAHI;;AAIV,oBAAKC,QAAL,CAAc;AAACR,gBAAAA,KAAK,EAACO;AAAP,eAAd;;AAJU;AAAA;;AAAA;AAAA;AAAA;AAMVE,cAAAA,OAAO,CAACC,GAAR;;AANU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAUhBC,O;;;;;+BAAU,kBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEDA,KAFC;AAAA;AAAA;AAAA;;AAAA,sBAGE,IAAIC,KAAJ,qBAHF;;AAAA;AAOEX,gBAAAA,SAPF,GAOgBU,KAPhB,CAOEV,SAPF;AAQNO,gBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBE,KAAtB;AARM;AAAA,uBASiBR,KAAK,oDACkBF,SADlB,GAC8B;AACtDY,kBAAAA,MAAM,EAAC;AAD+C,iBAD9B,CATtB;;AAAA;AASAT,gBAAAA,QATA;AAAA;AAAA,uBAeeA,QAAQ,CAACC,IAAT,EAff;;AAAA;AAeAS,gBAAAA,MAfA;;AAgBN,oBAAIA,MAAM,CAACC,OAAX,EAAoB;AAClB;AACMf,kBAAAA,OAFY,GAEFc,MAAM,CAACE,MAFL;AAGZC,kBAAAA,IAHY,GAGL;AAAChB,oBAAAA,SAAS,EAATA,SAAD;AAAYD,oBAAAA,OAAO,EAAPA;AAAZ,mBAHK;AAIZD,kBAAAA,KAJY,gCAIA,MAAKF,KAAL,CAAWE,KAJX,IAIkBkB,IAJlB;;AAMlB,wBAAKV,QAAL,CAAc;AAAER,oBAAAA,KAAK,EAALA;AAAF,mBAAd;AACD,iBAPD,MAOO;AACL,wBAAKQ,QAAL,CAAc;AAAET,oBAAAA,aAAa,EAAEgB,MAAM,CAACI;AAAxB,mBAAd;AACD;;AAzBK;AAAA;;AAAA;AAAA;AAAA;;AA2BN,sBAAKX,QAAL,CAAc;AAAET,kBAAAA,aAAa,EAAE,aAAIoB;AAArB,iBAAd;;AA3BM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;UAgCVC,Q,GAAW,UAAAC,GAAG,EAAI;AAChBA,MAAAA,GAAG,CAACC,cAAJ;AADgB,UAGRpB,SAHQ,GAGM,MAAKJ,KAHX,CAGRI,SAHQ;;AAIhB,YAAKS,OAAL,CAAa;AAAET,QAAAA,SAAS,EAATA;AAAF,OAAb;;AACA,YAAKJ,KAAL,CAAWE,KAAX,CAAiBuB,IAAjB,CAAsB;AAACrB,QAAAA,SAAS,EAATA;AAAD,OAAtB;;AACA,YAAKM,QAAL,CAAc;AAAEN,QAAAA,SAAS,EAAE;AAAb,OAAd;AAED,K;;;;;;;;;;;;;;;;uBArDS,KAAKC,QAAL,E;;;;;;;;;;;;;;;QAER;;;;6BAuDS;AAAA;;AACPM,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKF,QAAL,CAAcN,SAA1B;AADO,UAEAF,KAFA,GAES,KAAKF,KAFd,CAEAE,KAFA;AAGP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEA,KAAK,CAACwB,GAAN,CAAW,UAAAC,CAAC;AAAA,eACZ;AAAK,UAAA,GAAG,EAAEA,CAAC,CAACxB,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAMwB,CAAC,CAACvB,SAAR,CADA,CADY;AAAA,OAAZ,CADF,EAQA;AAAM,QAAA,QAAQ,EAAE,KAAKkB,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACA,QAAA,WAAW,EAAC,WADZ;AAEA,QAAA,QAAQ,EAAE,kBAAAC,GAAG;AAAA,iBAAI,MAAI,CAACb,QAAL,CAAc;AAAEN,YAAAA,SAAS,EAAEmB,GAAG,CAACK,MAAJ,CAAWC;AAAxB,WAAd,CAAJ;AAAA,SAFb;AAGA,QAAA,KAAK,EAAE,KAAK7B,KAAL,CAAWI,SAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAOE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAQE;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,KAAK,EAAC,QAA1B;AAAmC,QAAA,SAAS,EAAC,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CARA,CADF;AAuBD;;;;EA7FeN,S;;AAgGlB,eAAeC,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nclass App extends Component {\n  state={\n    error_message: \"\",\n    users:[],\n    user_id:'',\n    user_name:''\n  }\n\n  \n  async componentDidMount(){\n    await this.allUsers()\n  }\n  //All users\n     allUsers = async ()=>{\n    try{\n      const response = await fetch('//localhost:8080/users')\n      const data = await response.json()\n      this.setState({users:data})\n    }catch(err){\n      console.log(err)\n    }\n  }\n// add user\naddUser = async props => {\n  try {\n    if (!props ) {\n      throw new Error(\n        `you need  a name `\n      );\n    }\n    const { user_name } = props;\n    console.log('adduser',props)\n    const response = await fetch(\n      `http://localhost:8080/add/user?user_name=${user_name}`,{\n        method:'POST',\n      }\n    \n      );\n    const answer = await response.json();\n    if (answer.success) {\n      // we reproduce the user that was created in the database, locally\n      const user_id = answer.result;\n      const user = {user_name, user_id };\n      const users = [...this.state.users, user];\n\n      this.setState({ users});\n    } else {\n      this.setState({ error_message: answer.message });\n    }\n  } catch (err) {\n    this.setState({ error_message: err.message });\n  }\n};\n\n//on Submit \nonSubmit = evt => {\n  evt.preventDefault();\n  \n  const { user_name } = this.state;\n  this.addUser({ user_name });\n  this.state.users.push({user_name})\n  this.setState({ user_name: \"\" });\n  \n};\n\n\n\n  render() {\n    console.log(this.setState.user_name)\n    const {users} = this.state\n    return (\n      <div>\n      { users.map( x => \n        <div key={x.user_id}>\n        <p>  {x.user_name}</p>\n        </div>\n        )\n      }\n\n      <form onSubmit={this.onSubmit}>\n        <input \n        placeholder=\"user_name\"\n        onChange={evt => this.setState({ user_name: evt.target.value })}\n        value={this.state.user_name}\n\n        /> \n        <input type=\"submit\" value=\"ok\" />\n        <input type=\"reset\" value=\"cancel\" className=\"button\" />\n\n      </form>\n      </div>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}